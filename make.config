#
# $Log: make.config,v $
# Revision 1.12  1995/01/30 18:08:15  jcargill
# Major build system reorganization
#
# Revision 1.11  1994/09/30  19:21:07  rbi
# itty bitty typo fix
#
# Revision 1.10  1994/06/29  03:02:45  hollings
# AFS file paths
# added -fexternal-templates to CFLAGS
#
# Revision 1.9  1994/05/17  00:20:37  hollings
# added default baselined lib to VPATH
#
#
#

AS		= /bin/as
CC              = gcc
CC++            = g++
LEX		= flex
RANLIB		= ranlib
YFLAGS		= -d -y
YACC		= bison

ifeq ($(PLATFORM),sparc-sun-solaris2.3)
AS		= /usr/ccs/bin/as
RANLIB		= true
endif


# most "main" modules are only two levels deep, but we need to be able to
# change this for those that are deeper in the tree
ifndef TO_CORE
TO_CORE		= ../..
endif

# Default module compiler; modules which want $(CC) should redefine
# this, **NOT** CC

MODCC		= $(CC++)
MODCFLAGS	= $(CXXFLAGS)


.SUFFIXES:	.I

# VPATH		= ../src:$(TO_CORE)/../lib/$(PLATFORM):/p/paradyn/lib/$(PLATFORM)

IFLAGS          = -I. -I$(TO_CORE)

ASFLAGS         = -P $(IFLAGS)

COMMONWARNINGS	= -W -Wall -Wtraditional -Wshadow -Wpointer-arith       \
		-Wbad-function-cast -Wcast-qual -Wcast-align            \
		-Wwrite-strings -Wconversion -Wstrict-prototypes        \
		-Wmissing-prototypes -Wmissing-declarations             \
		-Wredundant-decls -Woverloaded-virtual

CFLAGS          = $(IFLAGS) -g -Wall -fexternal-templates
CXXFLAGS          = $(IFLAGS) -g -Wall -fexternal-templates

LIBDIR		= -L$(TO_CORE)/../lib/$(PLATFORM) \
		  -L/p/paradyn/lib/$(PLATFORM) \
		  -L/usr/psup/lib

ifdef USES_PVM
PVM_DIR		= /p/paradyn/packages/pvm3/lib/$(PLATFORM)
IFLAGS		+= -I/p/paradyn/packages/pvm3/include
LIBDIR		+= $(patsubst %,-L%,$(PVM_DIR))
VPATH		+= $(PVM_DIR)
endif

ifdef USES_TCLTK
TCLTK_DIRS	= /p/paradyn/packages/tk3.6 /p/paradyn/packages/tcl7.3
IFLAGS		+= $(patsubst %,-I%,$(TCLTK_DIRS))
LIBDIR		+= $(patsubst %,-L%/$(PLATFORM),$(TCLTK_DIRS))
VPATH		+= $(TCLTK_DIRS)
endif

ifdef USES_FLEX
FLEX_DIR	= /usr/psup/lib
LIBDIR		+= $(patsubst %,-L%,$(FLEX_DIR))
VPATH		+= $(FLEX_DIR)
endif

ifdef USES_LIBERTY
LIBERTY_DIR	= /usr/psup/gcc/lib
LIBDIR		+= $(patsubst %,-L%,$(LIBERTY_DIR))
VPATH		+= $(LIBERTY_DIR)
endif

ifdef USES_BLT
BLT_DIR		= /p/paradyn/packages/blt-1.7
LIBDIR		+= $(patsubst %,-L%/$(PLATFORM),$(BLT_DIR))
VPATH		+= $(BLT_DIR)/$(PLATFORM)
endif

ifdef USES_X11
ifeq ($(PLATFORM),sparc-sun-solaris2.3)
CFLAGS		+= -I/usr/openwin/include
CXXFLAGS	+= -I/usr/openwin/include
LIBDIR		+= -L/usr/openwin/lib
VPATH		+= /usr/openwin/lib
endif
endif


ifeq ($(PLATFORM),sparc-sun-solaris2.3)
RANLIB		= true
endif
