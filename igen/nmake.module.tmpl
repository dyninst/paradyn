#
# Common makefile template for igen.  This file is not intended to
# be a useful Makefile in isolation; instead, it should be included
# from within an architecture-specific Makefile.
#
# $Id: nmake.module.tmpl,v 1.10 2002/04/09 18:05:07 mjbrim Exp $
#

USES_FLEX = TRUE

TARGET	      = igen.exe

#SRCS 	     = $(SRCS) ../src/main.C \
#		parser.C \
#		scanner.C \
#		../src/interface_spec.C \
#	        ../src/templates-nt.C 

OBJS 		= main.obj parser.obj scanner.obj arg.obj interface_spec.obj \
                  message_layer.obj Options.obj remote_func.obj signature.obj \
		  type_defn.obj templates-nt.obj

LIBS 	     = $(LIBS) $(TO_CORE)\$(LIBRARY_DEST)\libpdutil.lib

SYSLIBS = $(FLEX_LIB)


all:	$(TARGET)

parser.obj:
	$(YACC) $(YFLAGS) ../src/$*.y
	$(PERL) $(TO_CORE)\..\scripts\vcStripStd.pl < y.tab.c > $*.C
	-$(RM) y.tab.c
	$(CXX) $(CXXFLAGS) -I../src -c $*.C

scanner.obj:
	$(LEX) $(LFLAGS) ../src/$*.l
	$(PERL) $(TO_CORE)\..\scripts\vcStripUnistd.pl < lex.yy.c > $*.C
	-$(RM) lex.yy.c
	$(CXX) $(CXXFLAGS) -I../src -c $*.C

