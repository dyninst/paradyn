#
# Common makefile template for igen.  This file is not intended to
# be a useful Makefile in isolation; instead, it should be included
# from within an architecture-specific Makefile.
#
# $Id: nmake.module.tmpl,v 1.9 2002/02/11 22:45:43 pcroth Exp $
#

USES_FLEX = TRUE

TARGET	      = igen.exe

#SRCS 	     = $(SRCS) ../src/main.C \
#		parser.C \
#		scanner.C \
#		../src/interface_spec.C \
#	        ../src/templates-nt.C 

OBJS 		= main.obj parser.obj scanner.obj interface_spec.obj \
                        templates-nt.obj

LIBS 	     = $(LIBS) $(TO_CORE)\$(LIBRARY_DEST)\libpdutil.lib

SYSLIBS = $(FLEX_LIB)


all:	$(TARGET)

parser.obj:
	$(YACC) $(YFLAGS) ../src/$*.y
	$(PERL) $(TO_CORE)\..\scripts\vcStripStd.pl < y.tab.c > $*.C
	-$(RM) y.tab.c
	$(CXX) $(CXXFLAGS) -I../src -c $*.C

scanner.obj:
	$(LEX) $(LFLAGS) ../src/$*.l
	$(PERL) $(TO_CORE)\..\scripts\vcStripUnistd.pl < lex.yy.c > $*.C
	-$(RM) lex.yy.c
	$(CXX) $(CXXFLAGS) -I../src -c $*.C

