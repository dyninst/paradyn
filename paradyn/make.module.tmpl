
# Common makefile template for paradyn.  This file is not intended to
# be a useful Makefile in isolation; instead, it should be included
# from within an architecture-specific Makefile.
#
# $Log: make.module.tmpl,v $
# Revision 1.18  1995/11/08 23:44:21  tamches
# added TCLFRIENDLYWARNINGS to the flags
#
# Revision 1.17  1995/10/18 00:52:32  tamches
# removed 4 no-longer-used .C files from SRCS
#
# Revision 1.16  1995/10/17 20:39:19  tamches
# Added whereAxis.C, abstractions.C, shg.C, shgRootNode.C,
# shgPhases.C, shgConsts.C, shgTcl.C
#
# Revision 1.15  1995/10/05 04:50:56  karavan
# added shgDisplay.C
#
# Revision 1.14  1995/09/20  01:32:01  tamches
# Added tkTools.C; added /s/flex/lib (for -fl on instructional solaris machines)
#
# Revision 1.13  1995/08/24  15:01:52  hollings
# AIX/SP-2 port (including option for split instruction/data heaps)
# Tracing of rexec (correctly spawns a paradynd if needed)
# Added rtinst function to read getrusage stats (can now be used in metrics)
# Critical Path
# Improved Error reporting in MDL sematic checks
# Fixed MDL Function call statement
# Fixed bugs in TK usage (strings passed where UID expected)
#
# Revision 1.12  1995/07/18  19:14:12  krisna
# changes to convert Tcl sources to C
#
# Revision 1.11  1995/07/17 05:02:52  tamches
# Additions for new where axis code (actually, certain files, such as
# where4tree.C, have been left out, since templates.C 'compiles' them
# just fine)
#
# Revision 1.10  1995/06/02  20:59:22  newhall
# changes for new dataManager interface
#
# Revision 1.9  1995/05/18  10:53:47  markc
# added define to quiet mdl error printing
#
# Revision 1.8  1995/05/18  10:50:05  markc
# Added mdl.C and define for mdl code
#
# Revision 1.7  1995/03/15  19:16:15  jcargill
# Removed -lresolv for all architectures, and added it back for Sunos
# and Solaris; libresolv.a causes trouble for hppa.
#
# Revision 1.6  1995/03/11  06:02:54  krisna
# libthread, libutil name change
#
# Revision 1.5  1995/02/27  18:32:30  tamches
# Changes to reflect the new TCthread.
#
# Revision 1.4  1995/02/26  02:14:39  newhall
# added source file DMphase.C
#
# Revision 1.3  1995/02/16  08:03:56  markc
# Added rule for templates file.
#
# Revision 1.2  1995/01/31  15:16:56  jcargill
# Fixed minor glitch: CC++ instead of CXX
#
# Revision 1.1  1995/01/30  18:10:07  jcargill
# Major build system reorganization
#
#

CFLAGS		+= $(TCLFRIENDLYWARNINGS)
CXXFLAGS	+= $(TCLFRIENDLYWARNINGS)
TFLAGS		+= $(TCLFRIENDLYWARNINGS)

TARGET	      = paradyn

VPATH	     += ../h:$(wildcard ../src/*thread):\
                ../src/pdMain:../src/met:../../visi/h:

SRCS	     += ../src/DMthread/DMpublic.C \
		../src/DMthread/DMdaemon.C \
		../src/DMthread/DMmetric.C \
		../src/DMthread/DMmain.C \
		../src/DMthread/DMperfstream.C \
		../src/DMthread/DMresource.C \
		../src/DMthread/DMabstractions.C \
		../src/DMthread/DMcritPath.C \
		../src/DMthread/DMphase.C \
		../src/pdMain/main.C \
		../src/VMthread/VMmain.C \
		../src/VISIthread/VISIthreadmain.C \
		../src/VISIthread/VISIthreadpublic.C \
		../src/PCthread/PCauto.C \
		../src/PCthread/PCpublic.C \
		../src/PCthread/PCevalTest.C \
		../src/PCthread/PCmetric.C \
		../src/PCthread/PCrules.C \
		../src/PCthread/PCshg.C \
		../src/PCthread/PCwhen.C \
		../src/PCthread/PCwhere.C \
		../src/PCthread/PCwhy.C \
		../src/PCthread/PCmain.C \
		../src/UIthread/tclTunable.C \
		../src/UIthread/Status.C \
		../src/UIthread/uimpd.tcl.C \
		../src/UIthread/UImain.C \
		../src/UIthread/UIpublic.C \
		../src/UIthread/UIwhere.C \
		../src/UIthread/paradyn.tcl.C \
		../src/UIthread/whereAxis.C \
		../src/UIthread/abstractions.C \
		../src/UIthread/where4treeConstants.C \
		../src/UIthread/rootNode.C \
		../src/UIthread/scrollbar.C \
		../src/UIthread/whereAxisTcl.C \
		../src/UIthread/shg.C \
		../src/UIthread/shgRootNode.C \
		../src/UIthread/shgPhases.C \
		../src/UIthread/shgConsts.C \
		../src/UIthread/shgTcl.C \
		../src/UIthread/tkTools.C \
		../src/TCthread/TCmain.C \
		../src/TCthread/tunableConst.C \
		../src/met/metMain.C \
		metParser.C \
		metScanner.C \
		../src/met/metClass.C \
		../src/templates.C  \
                ../src/met/mdl.C

IGEN_GEN_SRCS =	dataManager.thread.C \
		dataManager.thread.CLNT.C \
		dataManager.thread.SRVR.C \
		performanceConsultant.thread.C \
		performanceConsultant.thread.CLNT.C \
		performanceConsultant.thread.SRVR.C \
		dyninstRPC.xdr.C \
		dyninstRPC.xdr.CLNT.C \
		visi.xdr.CLNT.C \
		visi.xdr.C \
		VISIthread.thread.C \
		VISIthread.thread.SRVR.C \
		VISIthread.thread.CLNT.C \
		UI.thread.C \
		UI.thread.CLNT.C \
		UI.thread.SRVR.C \
		VM.thread.C \
		VM.thread.SRVR.C \
		VM.thread.CLNT.C 

	

IGEN_ISRCS    = dataManager.I \
		performanceConsultant.I \
		dyninstRPC.I \
		visi.I \
		VISIthread.I \
		UI.I \
		VM.I


TCL2C		= tcl2c
TCL2C_GEN_SRCS	= tcl2c.C
TCL_SRCS	= $(wildcard ../tcl/*.tcl)
#TCL_SRCS	=
		
SRCS		+= $(TCL2C_GEN_SRCS)


IFLAGS       += -DPARADYN
LIBDIR	     += -L/usr/psup/lib -L/s/flex/lib

LIBS 	     += -lpdutil -lpdthread
#SYSLIBS	     += -ltix -ltk -ltcl -lX11 -lm -lfl
SYSLIBS	     += -ltk -ltcl -lX11 -lm -lfl

CFLAGS       += -DNO_MDL_PRINT
CXXFLAGS     += -DNO_MDL_PRINT
TFLAGS       += -DNO_MDL_PRINT

all:	$(TARGET) 

metTester: metParser.o metTester.o metScanner.o metTemplates.o metClass.o
	$(CXX) $(LIBDIR) -o metTester metTemplates.o metParser.o metTester.o \
	metScanner.o metClass.o -lfl

templates.o: ../src/templates.C
	$(CXX) $(TFLAGS) -c ../src/templates.C

$(TCL2C_GEN_SRCS):	$(TCL_SRCS)
	$(TCL2C) $^ > $@
