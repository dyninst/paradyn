#
# Common makefile template for barchart.  This file is not intended to
# be a useful Makefile in isolation; instead, it should be included
# from within an architecture-specific Makefile.
#
# $Log: make.module.tmpl,v $
# Revision 1.10  1996/02/07 15:33:01  mjrg
# use perl to invoke tcl2c to avoid problems on HP.
#
# Revision 1.9  1996/01/10 02:22:03  tamches
# added an intelligent -I flag: the user no longer needs to have the visilib
# checked out in order to compile barChart
#
# Revision 1.8  1995/12/20 02:10:35  tamches
# removed TCL2C and TCL2C_GEN_SRCS (now in make.config)
#
# Revision 1.7  1995/11/29 00:41:18  tamches
# added tkTools.C, pdLogo.C, minmax.C
#
# Revision 1.6  1995/11/04 05:50:44  tamches
# removed -lhist (not needed)
#
# Revision 1.5  1995/08/06  22:12:33  tamches
# barChart now uses tcl2c
#
# Revision 1.4  1995/06/23  03:15:08  tamches
# changed to -fno-implicit-templates; added templates.C file.
#
# Revision 1.3  1995/05/10  23:09:43  tamches
# Cut down on the number of libraries that were being linked in;
# several were unnecessary (Xt, Xmu,...)
#
# Revision 1.2  1995/03/20  19:37:01  jcargill
# Fixed uses of libutil that were missed in the renaming.
#
# Revision 1.1  1995/01/30  18:12:10  jcargill
# Major build system reorganization
#
#

TARGET	      = barChart

IFLAGS	     += -I.. -I$(TO_CORE)/paradyn/src/UIthread \
		-I$(TO_CORE)/util/h

# if $(TO_CORE)/visi doesn't exist, then the -I$(TO_CORE) automatically
# inserted by make.config won't be enough for the compiler to find,
# say, visi/h/visualization.h.  We don't want to force the user to have
# "visi" checked out in order to compile barChart.
IFLAGS	+= $(shell if [ -d $(TO_CORE)/visi ]; then echo ""; else echo -I/p/paradyn/core; fi )

VPATH	     += $(TO_CORE)/paradyn/src/UIthread

SRCS	     += $(TO_CORE)/paradyn/src/UIthread/tkTools.C \
		$(TO_CORE)/paradyn/src/UIthread/pdLogo.C \
		$(TO_CORE)/paradyn/src/UIthread/minmax.C \
		../barChart.C \
		../barChartTcl.C \
		../barChartDriver.C \
		../dg2.C \
		../templates.C

TCL_SRCS	= ../barChart.tcl
#TCL_SRCS	= 
# $(wildcard ../*.tcl)
SRCS		+= $(TCL2C_GEN_SRCS)

LIBS         += -lvisi -lpdutil 
SYSLIBS	     += -ltk -ltcl -lX11 -lm

all:	$(TARGET)

$(TCL2C_GEN_SRCS): $(TCL_SRCS)
	perl $(TCL2C) $^ > $@
